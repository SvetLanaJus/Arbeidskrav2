<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dating app</title>
    <link rel="stylesheet" href="dating.css" />
  </head>
  <body>
    <div class="main-container">
      <div class="likes-container">
        Antall liker:
        <span id="likes-counter">10</span>
      </div>
      <div class="button-container">
        <input type="button" value="Kvinner" id="she-btn" />
        <input type="button" value="Menn" id="he-btn" />
        <input type="button" value="Kvinner og Menn" id="mix-btn" />
      </div>
      <div class="cards-container">
        <div id="random-card-container">
          <img id="random-card-picture" />
          <p id="random-card-name"></p>
          <p id="random-card-city"></p>
        </div>
        <div id="saved-card-container"></div>
      </div>
    </div>
    <script>
      //Variabler:
      //Antall likes
      const likesCounterTxt = document.getElementById("likes-counter");
      let likesCounter = 10;

      //Filtervalg
      let filter = "";

      //Knapper:
      const sheBtn = document.getElementById("she-btn");
      const heBtn = document.getElementById("he-btn");
      const mixBtn = document.getElementById("mix-btn");
      //Kontainere:
      //Kontainer for ett tilfeldig kort
      const randomCardContainer = document.getElementById(
        "random-card-container"
      );
      const randomCardPicture = document.getElementById("random-card-picture");
      const randomCardName = document.getElementById("random-card-name");
      const randomCardCity = document.getElementById("random-card-city");

      //Kontainer for korter bruker har lagret
      const savedCardContainer = document.getElementById(
        "saved-card-container"
      );

      function updateCounter() {
        likesCounterTxt.textContent = likesCounter;
      }

      function countLikes(liked) {
        if (likesCounter > 0) {
          likesCounter -= 1;
          updateCounter();
          getRandomCard();
        } else {
          alert(
            "Du har brukt et begrenset antall profilvalg! Hvis du vil gjenoppta forsøk, må du fjerne profiler fra lista"
          );
        }
      }
    
    function fetchRandomProfile() {
      // Implementere logikken til å fetche en tilfeldig profil fra API
      // oppgradere Container med fetched profils info
    }
  </script>
</body>
</html>

      //Hente inn tilfeldig kort
      async function getRandomCard() {
        try {
          let randomCardRequest = "";
          if (filter == "female") {
            randomCardRequest = await fetch(
              "https://randomuser.me/api/?gender=female"
            );
          } else if (filter == "male") {
            randomCardRequest = await fetch(
              "https://randomuser.me/api/?gender=male"
            );
          } else {
            randomCardRequest = await fetch("https://randomuser.me/api/");
          }

          const randomCard = await randomCardRequest.json();
          const randomPerson = randomCard.results[0];

          //Hente inn bilde
          randomCardPicture.src = randomPerson.picture.large;

          //Hente inn navn
          randomCardName.innerText = `${randomPerson.name.first} ${randomPerson.name.last}`;

          //Hente inn bosted
          randomCardCity.innerText = `${randomPerson.location.city}, ${randomPerson.location.country}`;
        } catch (error) {
          console.log("Feilmelding", error);
        }
      }

      getRandomCard();

      //Filtrering av kjønn på datingprofiler
      sheBtn.onclick = function () {
        filter = "female";
        getRandomCard();
      };
      heBtn.onclick = function () {
        filter = "male";
        getRandomCard();
      };
      mixBtn.onclick = function () {
        filter = "mix";
        getRandomCard();
      };

      //Like - dislike funksjon
      document.addEventListener("keydown", function (event) {
        if (event.keyCode == "37") {
          getRandomCard();
          console.log("dislike");
        } else if (event.keyCode == "39") {
          console.log("like");
          countLikes();
          //Må lage en funksjon for oversikt over likte profiler
        }
      });
    </script>
  </body>
</html>
